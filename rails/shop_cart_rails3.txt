A “magic” command worth knowing,  is rake db:migrate:redo. It will undo and reapply the last migration.

SQLite 3 is the default database for Rails development and was installed along with Rails

Sites $ rails new depot

depot $ ls -F
Gemfile         README.rdoc     Rakefile        app/            bin/            config/         config.ru       db/             lib/            log/            public/         test/           tmp/            vendor/



So, let’s go ahead and create the model, views, controller, and migration for our products table. With Rails, you can do all that with one command by asking Rails to generate what is known as a *scaffold* for a given model. Note that on the command line2 that follows, we use the singular form, Product. In Rails, a model is automatically mapped to a database table whose name is the plural form of the model’s class. In our case, we asked for a model called Product, so Rails associated it with the table called products.

The development entry in config/database.yml tells Rails where to look for database. For SQLite 3 users, this will be a file in the *db*	 directory



depot $ rails generate scaffold  Product title:string description:text image_url:string price:decimal  #<<These are all DB fields
Ran into issues:
#Output


/var/lib/gems/1.9.1/gems/execjs-2.0.2/lib/execjs/runtimes.rb:51:in `autodetect': Could not find a JavaScript runtime. See https://github.com/sstephenson/execjs for a list of available runtimes. (ExecJS::RuntimeUnavailable)
        from /var/lib/gems/1.9.1/gems/execjs-2.0.2/lib/execjs.rb:5:in `<module:ExecJS>'
        from /var/lib/gems/1.9.1/gems/execjs-2.0.2/lib/execjs.rb:4:in `<top (required)>'
        from /var/lib/gems/1.9.1/gems/uglifier-2.3.1/lib/uglifier.rb:3:in `require'
        from /var/lib/gems/1.9.1/gems/uglifier-2.3.1/lib/uglifier.rb:3:in `<top (required)>'
        from /var/lib/gems/1.9.1/gems/bundler-1.3.5/lib/bundler/runtime.rb:72:in `require'
        from /var/lib/gems/1.9.1/gems/bundler-1.3.5/lib/bundler/runtime.rb:72:in `block (2 levels) in require'
        from /var/lib/gems/1.9.1/gems/bundler-1.3.5/lib/bundler/runtime.rb:70:in `each'
        from /var/lib/gems/1.9.1/gems/bundler-1.3.5/lib/bundler/runtime.rb:70:in `block in require'
        from /var/lib/gems/1.9.1/gems/bundler-1.3.5/lib/bundler/runtime.rb:59:in `each'
        from /var/lib/gems/1.9.1/gems/bundler-1.3.5/lib/bundler/runtime.rb:59:in `require'
        from /var/lib/gems/1.9.1/gems/bundler-1.3.5/lib/bundler.rb:132:in `require'
        from /home/carneiro/Sites/depot/config/application.rb:7:in `<top (required)>'
        from /var/lib/gems/1.9.1/gems/railties-4.0.1/lib/rails/commands.rb:43:in `require'
        from /var/lib/gems/1.9.1/gems/railties-4.0.1/lib/rails/commands.rb:43:in `<top (required)>'
        from bin/rails:4:in `require'
        from bin/rails:4:in `<main>'

FIX
depot $ sudo apt-get install nodejs

depot $ rails generate scaffold  Product title:string description:text image_url:string price:decimal  #<<These are all DB fields
#Output
      invoke  active_record
      create    db/migrate/20131024185026_create_products.rb
      create    app/models/product.rb
      invoke    test_unit
      create      test/models/product_test.rb
      create      test/fixtures/products.yml
      invoke  resource_route
       route    resources :products
      invoke  scaffold_controller
      create    app/controllers/products_controller.rb
      invoke    erb
      create      app/views/products
      create      app/views/products/index.html.erb
      create      app/views/products/edit.html.erb
      create      app/views/products/show.html.erb
      create      app/views/products/new.html.erb
      create      app/views/products/_form.html.erb
      invoke    test_unit
      create      test/controllers/products_controller_test.rb
      invoke    helperhttp://localhost:3000/products/1
      create      app/helpers/products_helper.rb
      invoke      test_unit
      create        test/helpers/products_helper_test.rb
      invoke    jbuilder
      create      app/views/products/index.json.jbuilder
      create      app/views/products/show.json.jbuilder
      invoke  assets
      invoke    coffee
      create      app/assets/javascripts/products.js.coffee
      invoke    scss
      create      app/assets/stylesheets/products.css.scss
      invoke  scss
      create    app/assets/stylesheets/scaffolds.css.scss

depot $ rails server

depot $ curl 'http://localhost:3000/products/new' # EntryPoint to add new products
depot $ curl 'http://localhost:3000/products/' #All products
depot $ curl 'http://localhost:3000/products/1' #Info for 1st product
depot $ curl 'http://localhost:3000/products/1/edit' # Edit first product



All form elements in 'products/new' comes from _form.html.erb
Modifying the text field to accomodate 6 rows by default.

depot $ vi app/views/products/_form.html.erb

<%= f.text_area :description, rows: 6 %>


depot $ cat app/views/products/_form.html.erb

<%= form_for(@product) do |f| %>
  <% if @product.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@product.errors.count, "error") %>
      prohibited this product from being saved:</h2>

      <ul>
      <% @product.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :title %><br />
    <%= f.text_field :title %>
  </div>
  <div class="field">
    <%= f.label :description %><br />
<!-- START_HIGHLIGHT -->
    <%= f.text_area :description, rows: 6 %>
<!-- END_HIGHLIGHT -->
  </div>
  <div class="field">
    <%= f.label :image_url %><br />
    <%= f.text_field :image_url %>
  </div>
  <div class="field">
    <%= f.label :price %><br />
    <%= f.text_field :price %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %>


